{"componentChunkName":"component---src-templates-markdown-js","path":"/blueprints/blueprint/docs/adr/0011-operators.md","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"f828ae0b-9381-520b-b17a-88d364c219bc","html":"<h1 id=\"managing-operators\" style=\"position:relative;\"><a href=\"#managing-operators\" aria-label=\"managing operators permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Managing Operators</h1>\n<ul class=\"pf-c-list\">\n<li>Status: accepted</li>\n<li>Deciders: tumido, HumairAK, 4n4nd, anishasthana, larsks, martinpovolny</li>\n<li>Date: 2021-01-27</li>\n</ul>\n<p>Technical Story: <a href=\"https://github.com/operate-first/apps/issues/126\">issue-1</a>, <a href=\"https://github.com/operate-first/apps/pull/131\">pr-1</a>, <a href=\"https://github.com/operate-first/apps/pull/153\">pr-2</a></p>\n<h2 id=\"context-and-problem-statement\" style=\"position:relative;\"><a href=\"#context-and-problem-statement\" aria-label=\"context and problem statement permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context and Problem Statement</h2>\n<p>A <code class=\"language-text\">cluster-scope</code> application definition introduced by <a href=\"0010-common-auth-for-applications.md\">ADR 0010</a> is a bit vague for use cases like deploying operators. Operator Lifecycle Manager (OLM) defines a resource overlap where a single resource kind can be used in different contexts. For example, Subscription resource can subscribe to a specific operator which can be either cluster-scoped or namespace-scoped. This may go against the distinction introduced in <a href=\"0010-common-auth-for-applications.md\">ADR 0010</a>. This document provides guidance on how each of the resource kinds for OLM should be treated in each context and usage variant we aim to support.</p>\n<h2 id=\"decision-drivers\" style=\"position:relative;\"><a href=\"#decision-drivers\" aria-label=\"decision drivers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Decision Drivers</h2>\n<ul class=\"pf-c-list\">\n<li>The definition of a <code class=\"language-text\">cluster-scope</code> application at <a href=\"0010-common-auth-for-applications.md\">ADR 0010</a> does not provide enough guidance for OLM.</li>\n<li>Various OLM resources can be used in a way which effects the whole cluster or in a way that limits the effects to a single namespace.</li>\n<li>Various OLM resources have permission restrictions or behave as a singletons within a namespace.</li>\n<li>Some operators are not deployed via OLM, yet they behave as operators across all namespaces. Placement of those manifests is also disputed.</li>\n<li>How should we handle meta-operators which operate across all namespaces and deploy other operators that operate across all namespaces?</li>\n</ul>\n<h2 id=\"considered-options\" style=\"position:relative;\"><a href=\"#considered-options\" aria-label=\"considered options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Considered Options</h2>\n<ol class=\"pf-c-list\">\n<li>Deploy all operator-related resources within <code class=\"language-text\">cluster-scope</code> application.</li>\n<li>Require all namespaced resources to be deployed within individual applications, outside of <code class=\"language-text\">cluster-scope</code>.</li>\n<li>Find balance between 1. and 2. Deploy resources which have effect on a cluster level within <code class=\"language-text\">cluster-scope</code> app (also the namespace-scoped ones). The rest is deployed in individual applications.</li>\n</ol>\n<h2 id=\"decision-outcome\" style=\"position:relative;\"><a href=\"#decision-outcome\" aria-label=\"decision outcome permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Decision Outcome</h2>\n<p>Chosen option: <em>“3. Find balance between 1. and 2.”</em>, because it is desired to keep track of all resources which may effect other users and other namespaces i.e. operators provisioned to manage all cluster namespaces.</p>\n<p>Proposed decision defines strict rules for given resources. These rules are subject to future updates if needed, but the repositories and applications are required to consistently enforce them:</p>\n<h3 id=\"operator-lifecycle-manager-compatible-operators\" style=\"position:relative;\"><a href=\"#operator-lifecycle-manager-compatible-operators\" aria-label=\"operator lifecycle manager compatible operators permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Operator Lifecycle Manager compatible operators</h3>\n<p><a href=\"https://docs.openshift.com/container-platform/4.6/operators/understanding/olm/olm-understanding-olm.html\">Operator Lifecycle Manager</a> defines following resource kinds:</p>\n<ul class=\"pf-c-list\">\n<li>Cluster service version</li>\n<li>Catalog source</li>\n<li>Subscription</li>\n<li>Install plan</li>\n<li>Operator groups</li>\n</ul>\n<p>These are the set of guidelines we want to enforce on them:</p>\n<h4 id=\"cluster-service-version\" style=\"position:relative;\"><a href=\"#cluster-service-version\" aria-label=\"cluster service version permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cluster service version</h4>\n<p>This resource is not meant to be deployed manually and is expected to be provided from a <em>Catalog source</em>. If there’s really a need to deploy a custom <em>Cluster service version</em>, the resource has to live within the <code class=\"language-text\">cluster-scope</code> application.</p>\n<h4 id=\"catalog-source\" style=\"position:relative;\"><a href=\"#catalog-source\" aria-label=\"catalog source permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Catalog source</h4>\n<p>It is uncommon for a <em>Catalog source</em> to be declared manually. Operators are expected to be provisioned from the default catalogs and it is advised to publish the desired operator to a community catalog rather than deploying a custom <em>Catalog source</em>. If it is necessary to deploy an additional <code class=\"language-text\">CatalogSource</code> resource, this resource must be deployed to the <code class=\"language-text\">openshift-marketplace</code> namespace and therefore must be declared within the <code class=\"language-text\">cluster-scope</code> application.</p>\n<h4 id=\"subscription\" style=\"position:relative;\"><a href=\"#subscription\" aria-label=\"subscription permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Subscription</h4>\n<p>A <code class=\"language-text\">Subscription</code> resource is a namespace-scoped resource. It is effectively responsible for the operator deployment. Therefore we recognise 2 possible scenarios and use cases for this resource:</p>\n<ol class=\"pf-c-list\">\n<li>\n<p>A namespaced operator with a single namespace visibility:</p>\n<p>The <code class=\"language-text\">Subscription</code> resource can be hosted along with application manifests in an application repository. This application has to be deployed to the same namespace as specified for the subscription.</p>\n</li>\n<li>\n<p>An operator with all namespaces visibility:</p>\n<p>For operators with global effect, we expect the <code class=\"language-text\">Subscription</code> resource to be hosted in <code class=\"language-text\">cluster-scope</code> application only.</p>\n</li>\n</ol>\n<p>Deciding which namespace the OLM resources should reside for global operators will be done on a case-by-case basis. In general, the rule of thumb is to put them in <code class=\"language-text\">openshift-operators</code>, however we take note that there may be various exceptions to this rule (e.g. ClusterLogging, OpenShift Metering, etc.).</p>\n<p>The <code class=\"language-text\">Subscription</code> resource manifest is expected to be deployed to the same namespace where the corresponding <code class=\"language-text\">OperatorGroup</code> is located.</p>\n<h4 id=\"install-plan\" style=\"position:relative;\"><a href=\"#install-plan\" aria-label=\"install plan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install plan</h4>\n<p>Operators are not expected to deploy a custom <em>Install plan</em>. We expect every plan to be provided by the <em>Cluster service version</em> resource belonging to the given operator.</p>\n<h4 id=\"operator-groups\" style=\"position:relative;\"><a href=\"#operator-groups\" aria-label=\"operator groups permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Operator groups</h4>\n<p>An <code class=\"language-text\">OperatorGroup</code> resource is a namespace-scoped resource. However we require this resource to be placed in the <code class=\"language-text\">cluster-scope</code> application only, this is due to the following reasons:</p>\n<ol class=\"pf-c-list\">\n<li>This resource is a singleton in namespace context. There can’t be multiple instances of the said resource in the same namespace, even if the name differs.</li>\n<li>When deployed it generates <code class=\"language-text\">ClusterRole</code> and <code class=\"language-text\">ClusterRoleBinding</code> and aggregation rules.</li>\n<li>It can specify all namespaces visibility for an operator.</li>\n<li>By default project admins do not have create/edit rights to <code class=\"language-text\">OperatorGroup</code>s (due to points 2 and 3), so only cluster-admins can manage <em>Operator groups</em>.</li>\n</ol>\n<p>There are a number <a href=\"https://github.com/operator-framework/operator-lifecycle-manager/blob/master/doc/design/operatorgroups.md#what-can-go-wrong\">of possible conflicts</a> that are a direct consequence of an <code class=\"language-text\">OperatorGroup</code> deployment. These resources need to be treated carefully and therefore it is required for them to be placed and maintained at <code class=\"language-text\">cluster-scope</code> application level.</p>\n<p>Centralized <code class=\"language-text\">Operator Group</code> management ensures we won’t be deploying the same namespaced operator while we already have another instance with all namespace visibility, etc.</p>\n<p>According to the upstream documentation on <a href=\"https://docs.openshift.com/container-platform/4.6/operators/understanding/olm/olm-understanding-operatorgroups.html#olm-operatorgroups-target-namespace_olm-understanding-operatorgroups\"><code class=\"language-text\">OperatorGroup</code> target namespace selection</a> we enforce and support only these options for target namespace specification in <em>Operator groups</em> specification:</p>\n<ol class=\"pf-c-list\">\n<li>A global, cluster-wide operator with visibility to all namespaces, that means the <code class=\"language-text\">.spec</code> section of the manifest is blank.</li>\n<li>A single namespace operator. Resource manifest specifies <code class=\"language-text\">.spec.targetNamespaces: [ SINGLE_MEMBER_NAMESPACE ]</code>. This namespace has to be deployed via <code class=\"language-text\">cluster-scope</code> application as well.</li>\n</ol>\n<p>The <code class=\"language-text\">OperatorGroup</code> resource manifest is expected to be deployed to the same namespace where the corresponding <code class=\"language-text\">Subscription</code> is located.</p>\n<h3 id=\"direct-operator-deployment\" style=\"position:relative;\"><a href=\"#direct-operator-deployment\" aria-label=\"direct operator deployment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Direct operator deployment</h3>\n<p>Some operators are not deployed via the OLM. That means, their manifests require manual deployment of <code class=\"language-text\">CustomResourceDefinition</code>s, <code class=\"language-text\">ClusterRole</code>s etc. We require this kind of resources to be deployed via <code class=\"language-text\">cluster-scope</code> application.</p>\n<p>In contrast to that, all the other resources required for a non-OLM operator deployment, like <code class=\"language-text\">Deployment</code>, <code class=\"language-text\">Route</code> etc. are treated as any other namespace scoped application and all the manifests required for deployment are expected to be located as a separate application in the <code class=\"language-text\">operate-first/apps</code> repository as a root folder.</p>\n<h3 id=\"meta-operators\" style=\"position:relative;\"><a href=\"#meta-operators\" aria-label=\"meta operators permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Meta-operators</h3>\n<p>This is a special kind of operator. A meta-operator in this context is understood to be any operator allowing deployment of other operators at cluster scope. Our intention is to limit the possibilities of such operator to be able to interfere with our cluster management in <code class=\"language-text\">cluster-scope</code> application. We expect meta-operators to provide options to either:</p>\n<ul class=\"pf-c-list\">\n<li>Limit their permissions via operator configuration, so they are not able to deploy resources requiring cluster-admin permissions.</li>\n<li>Limit the create/edit access permission to the custom resources they create, in order to limit normal project users or project admins from escalating their privileges.</li>\n</ul>\n<p>If it is not possible to deploy a meta-operator in a way that respects one of the 2 conditions, it is expected from the operator requester to raise this issue upstream. Until this is fixed we expect the operator to be installed manually via <a href=\"#direct-operator-deployment\">Direct operator deployment</a>, not via OLM framework, therefore allowing us to manually control the custom resource access permissions for regular users or the operator service account <code class=\"language-text\">ClusterRole</code>.</p>\n<h3 id=\"positive-consequences\" style=\"position:relative;\"><a href=\"#positive-consequences\" aria-label=\"positive consequences permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Positive Consequences</h3>\n<ul class=\"pf-c-list\">\n<li>Clear guidance on each and individual resource regarding operators, which may appear confusing without such rules.</li>\n<li>Allows operator to be treated like normal applications in case they are deployed manually. This will not clutter the <code class=\"language-text\">cluster-scope</code> applicaton anymore.</li>\n<li>Enforces restrictions that prevent user privilege escalation via meta-operators.</li>\n</ul>\n<h3 id=\"negative-consequences\" style=\"position:relative;\"><a href=\"#negative-consequences\" aria-label=\"negative consequences permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Negative Consequences</h3>\n<ul class=\"pf-c-list\">\n<li>Complex set of rules all cluster-admins have to follow and fully understand.</li>\n</ul>\n<h2 id=\"pros-and-cons-of-the-options\" style=\"position:relative;\"><a href=\"#pros-and-cons-of-the-options\" aria-label=\"pros and cons of the options permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pros and Cons of the Options</h2>\n<h3 id=\"deploy-all-operator-related-resources-within-cluster-scope-application\" style=\"position:relative;\"><a href=\"#deploy-all-operator-related-resources-within-cluster-scope-application\" aria-label=\"deploy all operator related resources within cluster scope application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy all operator-related resources within <code class=\"language-text\">cluster-scope</code> application</h3>\n<ul class=\"pf-c-list\">\n<li>Good, because it is very easy to implement.</li>\n<li>Good, because it makes the rules very clear for the users - If you want an operator, it needs to live here every time.</li>\n<li>Bad, because it is impossible to achieve for meta-operators like ODH.</li>\n<li>Bad, because it is hard to maintain, since some (especially namespaced) operators may be owned by different teams.</li>\n<li>Bad, because the amount of resources deployed by the <code class=\"language-text\">cluster-scope</code> application may increase drastically.</li>\n<li>Bad, because it doesn’t solve meta-operators access - their custom resources can be used to deploy operators on cluster scope anyways.</li>\n</ul>\n<h3 id=\"require-all-namespaced-resources-to-be-deployed-within-individual-applications-outside-of-cluster-scope\" style=\"position:relative;\"><a href=\"#require-all-namespaced-resources-to-be-deployed-within-individual-applications-outside-of-cluster-scope\" aria-label=\"require all namespaced resources to be deployed within individual applications outside of cluster scope permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Require all namespaced resources to be deployed within individual applications, outside of <code class=\"language-text\">cluster-scope</code></h3>\n<ul class=\"pf-c-list\">\n<li>Good, because it is very easy to implement.</li>\n<li>Good, because it doesn’t require complex rules to follow for the users.</li>\n<li>Bad, because it is impossible to achieve for meta-operators like ODH.</li>\n<li>Bad, because some namespace-scoped resources are required to be unique to the said namespace.</li>\n<li>Bad, because some namespace-scoped resources can grant access to an operator at cluster scope level.</li>\n</ul>\n<h3 id=\"find-balance-between-1-and-2\" style=\"position:relative;\"><a href=\"#find-balance-between-1-and-2\" aria-label=\"find balance between 1 and 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Find balance between 1. and 2.</h3>\n<ul class=\"pf-c-list\">\n<li>Good, because we can weight each resource kind separately and decide based on the context and use case.</li>\n<li>Good, because it allows us keep the <code class=\"language-text\">cluster-scope</code> application at a reasonable size.</li>\n<li>Good, because it gives enough control to individual application/project owners when they want to deploy namespaced operators.</li>\n<li>Bad, because it requires complex rules and full understanding of the resources by the systems integrators who want to provision an operator.</li>\n</ul>\n<h2 id=\"links\" style=\"position:relative;\"><a href=\"#links\" aria-label=\"links permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Links</h2>\n<ul class=\"pf-c-list\">\n<li>Adds further detail to a specific usecase for <a href=\"0010-common-auth-for-applications.md\">ADR 0010</a></li>\n<li><a href=\"https://docs.openshift.com/container-platform/4.6/operators/understanding/olm/olm-understanding-olm.html\">Operator Lifecycle Manager</a> concepts</li>\n<li><a href=\"https://github.com/operator-framework/operator-lifecycle-manager/blob/master/doc/design/operatorgroups.md\"><code class=\"language-text\">OperatorGroup</code> design document</a></li>\n<li><a href=\"https://docs.openshift.com/container-platform/4.6/operators/understanding/olm/olm-understanding-operatorgroups.html#olm-operatorgroups-target-namespace_olm-understanding-operatorgroups\"><code class=\"language-text\">OperatorGroup</code> target namespace selection</a></li>\n</ul>","fields":{"srcLink":"https://github.com/operate-first/blueprint/blob/master/docs/adr/0011-operators.md"},"frontmatter":{"title":"","description":null}}},"pageContext":{"id":"f828ae0b-9381-520b-b17a-88d364c219bc"}},"staticQueryHashes":["117426894","3000541721"]}