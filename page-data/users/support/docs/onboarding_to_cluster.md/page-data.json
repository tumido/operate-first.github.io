{"componentChunkName":"component---src-templates-markdown-js","path":"/users/support/docs/onboarding_to_cluster.md","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"0b07d0da-842f-51a5-a26e-8472b2a24d04","html":"<h1 id=\"onboarding-to-a-cluster\" style=\"position:relative;\"><a href=\"#onboarding-to-a-cluster\" aria-label=\"onboarding to a cluster permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Onboarding to a cluster</h1>\n<p>This document serves as a guide for adding cluster scoped resources of <code class=\"language-text\">Namespace</code> and <code class=\"language-text\">Group</code> kinds. Following steps in this guide should result in a PR against the <a href=\"https://github.com/operate-first/apps\">operate-first/apps</a> repository.</p>\n<p>Currently we support 2 ways to request/perform onboarding to any supported clusters:</p>\n<ol class=\"pf-c-list\">\n<li>Onboarding request - please use the <strong>Onboarding to Cluster</strong> issue template in <a href=\"https://github.com/operate-first/support\">operate-first/support</a> repository.</li>\n<li>Opening a PR with the desired changes. The rest of this doc focuses on this second option. We’d gladly welcome your contributions.</li>\n</ol>\n<h2 id=\"prerequisites\" style=\"position:relative;\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h2>\n<p>You will need pre-requisite tools to follow along with this doc, please do one of the following:</p>\n<ul class=\"pf-c-list\">\n<li>Install our <a href=\"https://github.com/operate-first/toolbox\">toolbox</a> to have the developer setup ready automatically for you.</li>\n<li>Install the tools manually. You’ll need <a href=\"https://kustomize.io/\">kustomize</a>, <a href=\"https://github.com/mozilla/sops\">sops</a> and <a href=\"https://github.com/viaduct-ai/kustomize-sops\">ksops</a>.</li>\n</ul>\n<p>Please fork/clone the <a href=\"https://github.com/operate-first/apps\">operate-first/apps</a> repository. <strong>During this whole setup, we’ll be working within this repository.</strong></p>\n<p>For successful completion of this guide you need to understand what the aim is. Please have prepared following data:</p>\n<ul class=\"pf-c-list\">\n<li>Name of the onboarded team.</li>\n<li>Desired namespace name. Please use your team name as a prefix. This will make it easier for you to <a href=\"https://github.com/operate-first/argocd-apps/blob/main/docs/onboard_team_to_argocd.md\">onboard to ArgoCD</a> later on.</li>\n<li>List of users you’d like to add to your team.</li>\n<li>An optional team GPG key, in case you would like to modify the encrypted list of users of your team later on.</li>\n</ul>\n<h2 id=\"recipe\" style=\"position:relative;\"><a href=\"#recipe\" aria-label=\"recipe permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recipe</h2>\n<p>If you want to know more about the overall design please consult the ADR documentation at <a href=\"https://github.com/operate-first/blueprint\">operate-first/support</a>.</p>\n<p>In general we store all the cluster-scoped resources in a <code class=\"language-text\">cluster-scope</code> kustomize application within this repository.</p>\n<h2 id=\"adding-namespaces\" style=\"position:relative;\"><a href=\"#adding-namespaces\" aria-label=\"adding namespaces permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding namespaces</h2>\n<p>For easier <a href=\"https://github.com/operate-first/argocd-apps/blob/main/docs/onboard_team_to_argocd.md\">onboard to ArgoCD</a> later on, we prefer to follow a name pattern for all our namespaces. Please use your team name as a prefix to the namespace name like so: <code class=\"language-text\">$OWNER_TEAM-example-project</code>.</p>\n<h3 id=\"base-resources\" style=\"position:relative;\"><a href=\"#base-resources\" aria-label=\"base resources permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Base resources</h3>\n<p>Please run:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">bash hack/onboarding.sh NAMESPACE_NAME OWNER_TEAM OPTIONAL_PROJECT_DESCRIPTION</code></pre></div>\n<p>This script will create</p>\n<ul class=\"pf-c-list\">\n<li>A namespace in <code class=\"language-text\">cluster-scope/base/namespaces/$NAMESPACE_NAME</code></li>\n<li>A blank user group for the <code class=\"language-text\">$OWNER_TEAM</code> if it does not exist yet in the <code class=\"language-text\">cluster-scope/base/groups/$OWNER_TEAM</code></li>\n<li>An RBAC component for the project admin role <code class=\"language-text\">RoleBinding</code> in <code class=\"language-text\">cluster-scope/components/namespace-admin-rolebinding/$OWNER_TEAM</code> and maps it to the newly added namespace.</li>\n</ul>\n<h3 id=\"enabling-namespace-deployment-to-a-specific-cluster\" style=\"position:relative;\"><a href=\"#enabling-namespace-deployment-to-a-specific-cluster\" aria-label=\"enabling namespace deployment to a specific cluster permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enabling namespace deployment to a specific cluster</h3>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">cd cluster-scope/overlays/TARGET_CLUSTER\nkustomize edit add resource ../../base/namespaces/$NAMESPACE</code></pre></div>\n<h2 id=\"adding-users\" style=\"position:relative;\"><a href=\"#adding-users\" aria-label=\"adding users permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding users</h2>\n<p>The following steps enable users to access designated cluster/namespaces. This simply consists of adding such users to the appropriate OpenShift groups with access to those cluster/namespaces. Depending on the cluster, these groups may need to be encrypted, or may be stored as plaintext, each scenario requires a different set of steps.</p>\n<p>To recognise which scenario applies to you, please select target cluster in <code class=\"language-text\">cluster-scope/overlays/TARGET_CLUSTER</code>. You either see a <code class=\"language-text\">secret-generator.yaml</code> (encrypted users) file or <code class=\"language-text\">group-user_patch.yaml</code> file (plaintext) in this folder.</p>\n<p>Please follow the steps according to your use case:</p>\n<ul class=\"pf-c-list\">\n<li><a href=\"#encrypted-overlay-patch-for-users\">Creating a group or adding users as an encrypted resource</a></li>\n<li><a href=\"#plaintext-overlay-patch-for-users\">Creating a group or adding users without encryption</a></li>\n</ul>\n<h3 id=\"encrypted-overlay-patch-for-users\" style=\"position:relative;\"><a href=\"#encrypted-overlay-patch-for-users\" aria-label=\"encrypted overlay patch for users permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Encrypted overlay patch for users</h3>\n<p>We’ll use sops/ksops for the encryption in here.</p>\n<p>Please change your working directory to <code class=\"language-text\">cluster-scope/overlays/TARGET_CLUSTER</code>.</p>\n<h4 id=\"creating-new-group-encrypted-overlay-patch\" style=\"position:relative;\"><a href=\"#creating-new-group-encrypted-overlay-patch\" aria-label=\"creating new group encrypted overlay patch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating new group encrypted overlay patch</h4>\n<p>Please create following resource describing the users in your group:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># groups/GROUP_NAME.yaml</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> user.openshift.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Group\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> GROUP_NAME\n  <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">kustomize.config.k8s.io/behavior</span><span class=\"token punctuation\">:</span> replace\n<span class=\"token key atrule\">users</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> USER_1\n  <span class=\"token punctuation\">-</span> USER_2</code></pre></div>\n<p>Now please encrypt the file with sops and verify it contains a fingerprint of both GPG keys: the OperateFirst master key and your team’s key.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ sops --encrypt --encrypted-regex=&quot;^users$&quot; --pgp=&quot;0508677DD04952D06A943D5B4DC4116D360E3276, YOUR_GPG_KEY_FINGERPRINT&quot; groups/GROUP_NAME.yaml &gt; groups/GROUP_NAME.enc.yaml\n$ grep &quot;fp: &quot; groups/GROUP_NAME.enc.yaml\n        fp: 0508677DD04952D06A943D5B4DC4116D360E3276\n        fp: YOUR_GPG_KEY_FINGERPRINT</code></pre></div>\n<p>Explanation to the <code class=\"language-text\">sops</code> command:</p>\n<ul class=\"pf-c-list\">\n<li><code class=\"language-text\">encrypt</code> flag encrypts a resource</li>\n<li><code class=\"language-text\">encrypted-regex</code> value maps to the XPath-like regex to specifies which parts of the file should be encrypted. The rest of the file is left as a plaintext for easier management. In this case we want to encrypt only the <code class=\"language-text\">users</code> property in the file. See the docs <a href=\"https://github.com/mozilla/sops#encrypting-only-parts-of-a-file\">here</a>.</li>\n<li><code class=\"language-text\">pgp</code> list all the GPG keys which will be used to encrypt this file.</li>\n</ul>\n<p>Don’t forget to remove the plaintext variant of the resource before staging for a commit:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">rm groups/GROUP_NAME.yaml</code></pre></div>\n<p>And list the sops encrypted file in the secret generator file:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># secret-generator.yaml</span>\n<span class=\"token key atrule\">files</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> groups/GROUP_NAME.enc.yaml</code></pre></div>\n<h4 id=\"adding-user-to-encrypted-overlay-patch\" style=\"position:relative;\"><a href=\"#adding-user-to-encrypted-overlay-patch\" aria-label=\"adding user to encrypted overlay patch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding user to encrypted overlay patch</h4>\n<p>Use sops to edit the encrypted group resource patch as:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">sops groups/GROUP_NAME.enc.yaml</code></pre></div>\n<p>Then simply append the list of users with the new users that need to be added.</p>\n<h3 id=\"plaintext-overlay-patch-for-users\" style=\"position:relative;\"><a href=\"#plaintext-overlay-patch-for-users\" aria-label=\"plaintext overlay patch for users permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Plaintext overlay patch for users</h3>\n<p>This is expected to be a simple JSON kustomize patch.</p>\n<p>Please change your working directory to <code class=\"language-text\">cluster-scope/overlays/TARGET_CLUSTER</code>.</p>\n<h4 id=\"creating-new-group-plaintext-overlay-patch\" style=\"position:relative;\"><a href=\"#creating-new-group-plaintext-overlay-patch\" aria-label=\"creating new group plaintext overlay patch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating new group plaintext overlay patch</h4>\n<p>Create a file containing a JSON patch that looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># group-user_patch.yaml</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">op</span><span class=\"token punctuation\">:</span> add\n  <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /users/<span class=\"token punctuation\">-</span>\n  <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> USER_1\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">op</span><span class=\"token punctuation\">:</span> add\n  <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /users/<span class=\"token punctuation\">-</span>\n  <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> USER_2</code></pre></div>\n<p>And list it as a patch for groups you desire to patch:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># kustomization.yaml</span>\n<span class=\"token key atrule\">patchesJson6902</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">...</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> group<span class=\"token punctuation\">-</span>user_patch.yaml\n    <span class=\"token key atrule\">target</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">group</span><span class=\"token punctuation\">:</span> user.openshift.io\n      <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Group\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> GROUP_NAME\n      <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> v1</code></pre></div>\n<h4 id=\"adding-users-to-plaintext-overlay-patch\" style=\"position:relative;\"><a href=\"#adding-users-to-plaintext-overlay-patch\" aria-label=\"adding users to plaintext overlay patch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding users to plaintext overlay patch</h4>\n<p>This is very similar to the previous section. Just edit the patch file and add new users to the group patch and verify this file propagates to the appropriate groups in the <code class=\"language-text\">kustomization.yaml</code>.</p>\n<h2 id=\"finalize\" style=\"position:relative;\"><a href=\"#finalize\" aria-label=\"finalize permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Finalize</h2>\n<p>Please stage your changes and send them as a PR against the <a href=\"https://github.com/operate-first/apps\">operate-first/apps</a> repository. Make sure:</p>\n<ul class=\"pf-c-list\">\n<li>Change set includes only you modifications within the <code class=\"language-text\">cluster-scope</code> application.</li>\n<li>Change set may include your optional changes to the <code class=\"language-text\">.sops.yaml</code> file.</li>\n<li>Your commit <strong>doesn’t include any sensitive data as an unencrypted resource</strong>, such resources should be included only as encrypted.</li>\n</ul>","fields":{"srcLink":"https://github.com/operate-first/support/blob/master/docs/onboarding_to_cluster.md"},"frontmatter":{"title":"","description":null}}},"pageContext":{"id":"0b07d0da-842f-51a5-a26e-8472b2a24d04"}},"staticQueryHashes":["117426894","3000541721"]}