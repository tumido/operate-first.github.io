{"componentChunkName":"component---src-templates-markdown-js","path":"/users/apps/odh/","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"dcdb2db5-c6ff-5b53-9c36-3036b8cf23a5","html":"<h1 id=\"odh\" style=\"position:relative;\"><a href=\"#odh\" aria-label=\"odh permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ODH</h1>\n<p>This repo contains manifests to install Open Data Hub.</p>\n<h2 id=\"directory-structure\" style=\"position:relative;\"><a href=\"#directory-structure\" aria-label=\"directory structure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Directory Structure</h2>\n<p>We use a combination of <a href=\"https://kubernetes.io/docs/tasks/manage-kubernetes-objects/kustomization/#bases-and-overlays\">Kustomize Overlays</a>\nand <a href=\"https://developers.redhat.com/blog/2020/07/23/open-data-hub-and-kubeflow-installation-customization/\">ODH overrides</a> to structure our ODH manifests.</p>\n<blockquote>\n<p>Note: We require most, if not all, extensions to ODH should be added via overriding.\nWhen extending ODH with custom resources that are themselves introduced by ODH, then overriding is mandatory.</p>\n</blockquote>\n<p>Each folder within ‘Bases’ and ‘Overlays/$ENV’ corresponds to a set of components that will be deployed\nwithin the same namespace. Often times there will be one component per namespace, but this is not always the case.\nIn each directory you will find:</p>\n<ul class=\"pf-c-list\">\n<li><code class=\"language-text\">kfdef.yaml</code> - Prescription to what ODH components should be deployed here.</li>\n<li><code class=\"language-text\">kustomization.yaml</code> - For deploying into ArgoCD via <code class=\"language-text\">kustomize</code>.</li>\n<li><code class=\"language-text\">overrides</code> folder (optional) - This serves as thin modification layer on top of ODH. It allows us to overwrite files which are already present in the upstream <a href=\"https://github.com/opendatahub-io/odh-manifests/\">odh-manifests</a>.</li>\n</ul>\n<p>Note: The <code class=\"language-text\">overrides</code> folder can also contain a full set of resource manifests for new, additional components, that are not yet part of ODH. We aim to get these components to the ODH upstream, though for the time being we stage them in here, so we can work on operating them properly in advance.</p>\n<h4 id=\"how-does-overriding-work-in-odh\" style=\"position:relative;\"><a href=\"#how-does-overriding-work-in-odh\" aria-label=\"how does overriding work in odh permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How does overriding work in ODH?</h4>\n<p>We implement the 2nd approach mentioned in <a href=\"https://developers.redhat.com/blog/2020/07/23/open-data-hub-and-kubeflow-installation-customization/\">Open Data Hub and Kubeflow installation customization</a> blog post.</p>\n<p>We essentially place our modified files on same relative path (within <code class=\"language-text\">repoRef.path</code>) as they are located in <code class=\"language-text\">odh-manifests</code> and then declare this override as a new application after the upstream one. This will copy our modified file over the original and since that resource file is already present in the upstream <code class=\"language-text\">kustomization.yaml</code>, it will be applied.</p>\n<p>Let’s say we want to modify <a href=\"https://github.com/opendatahub-io/odh-manifests/blob/master/jupyterhub/jupyterhub/base/jupyterhub-configmap.yaml\"><code class=\"language-text\">jupyterhub/jupyterhub/base/jupyterhub-configmap.yaml</code></a> for our <code class=\"language-text\">moc</code> deployment.</p>\n<p>We place our modified file at <code class=\"language-text\">odh/overlays/moc/jupyterhub/overrides/base/jupyterhub-configmap.yaml</code> and modify the <code class=\"language-text\">kfdef.yaml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> KfDef\n<span class=\"token punctuation\">...</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">applications</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">...</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">kustomizeConfig</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">repoRef</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> manifests\n        <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> jupyterhub/jupyterhub\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> jupyterhub\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">kustomizeConfig</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">repoRef</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> of<span class=\"token punctuation\">-</span>overrides\n        <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> odh/overlays/moc/jupyterhub/overrides\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> jupyterhub\n  <span class=\"token key atrule\">repos</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">...</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> manifests\n    <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//github.com/opendatahub<span class=\"token punctuation\">-</span>io/odh<span class=\"token punctuation\">-</span>manifests/tarball/master\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> of<span class=\"token punctuation\">-</span>overrides\n    <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//github.com/operate<span class=\"token punctuation\">-</span>first/apps/tarball/master</code></pre></div>","fields":{"srcLink":"https://github.com/operate-first/apps/blob/master/odh/README.md"},"frontmatter":{"title":"","description":null}}},"pageContext":{"id":"dcdb2db5-c6ff-5b53-9c36-3036b8cf23a5"}},"staticQueryHashes":["117426894","3000541721"]}