{"componentChunkName":"component---src-templates-markdown-js","path":"/users/elyra/docs/source/deploy-model.md","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"348f50c7-6be5-52dd-861d-7b2bb2de400b","html":"<h1 id=\"deploy-your-model\" style=\"position:relative;\"><a href=\"#deploy-your-model\" aria-label=\"deploy your model permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy your model</h1>\n<p>There are different ways to deploy a model and different tools that can be used for that (e.g. Seldon, Tf-Serving, TensorRT), but for this tutorial we created a simple Flask application that can be easily deployed.</p>\n<h2 id=\"create-flask-application\" style=\"position:relative;\"><a href=\"#create-flask-application\" aria-label=\"create flask application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create Flask application</h2>\n<p>Once you trained your model and it is stored on Ceph, you can start working on your inference application to expose your model.</p>\n<p>For the purpose of this tutorial you can reuse the <a href=\"https://github.com/thoth-station/elyra-aidevsecops-tutorial/blob/master/wsgi.py\">application</a> created using Flask, that\nexposes some useful endpoints (e.g <code class=\"language-text\">/predict</code> and <code class=\"language-text\">/metrics</code>).</p>\n<h2 id=\"make-new-release\" style=\"position:relative;\"><a href=\"#make-new-release\" aria-label=\"make new release permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Make new release</h2>\n<p><a href=\"https://github.com/thoth-station/elyra-aidevsecops-tutorial/blob/master/docs/source/build-images.md\">Create release and build image</a></p>\n<h2 id=\"deploy-application\" style=\"position:relative;\"><a href=\"#deploy-application\" aria-label=\"deploy application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy application</h2>\n<h3 id=\"requirements\" style=\"position:relative;\"><a href=\"#requirements\" aria-label=\"requirements permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Requirements</h3>\n<ul class=\"pf-c-list\">\n<li>Image Name: <code class=\"language-text\">quay.io/thoth-station/elyra-aidevsecops-tutorial:v0.5.0</code></li>\n<li><a href=\"https://github.com/thoth-station/elyra-aidevsecops-tutorial/blob/master/manifests/base/deploymentconfig.yaml\">DeploymentConfig</a></li>\n<li><a href=\"https://github.com/thoth-station/elyra-aidevsecops-tutorial/blob/master/manifests/base/route.yaml\">Route</a></li>\n<li><a href=\"https://github.com/thoth-station/elyra-aidevsecops-tutorial/blob/master/manifests/base/service.yaml\">Service</a></li>\n</ul>\n<h3 id=\"on-operate-first-using-argocd\" style=\"position:relative;\"><a href=\"#on-operate-first-using-argocd\" aria-label=\"on operate first using argocd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>On Operate First using ArgoCD</h3>\n<p><a href=\"https://argoproj.github.io/argo-cd/\">ArgoCD</a>, used for Continuous Deployment of your applications, is available on Operate First and you can request the Operate First team to be used for your application.</p>\n<p>There are typically two steps you need to follow in order to have a new application deployed on <a href=\"https://www.operate-first.cloud/\">Operate First</a>:</p>\n<ol class=\"pf-c-list\">\n<li>Create all manifests for your project (e.g. deployment, service, routes, workflows, pipelines) and place them in your repo under <code class=\"language-text\">/manifests</code>.</li>\n<li><a href=\"https://github.com/operate-first/support/issues/new?assignees=&#x26;labels=onboarding&#x26;template=onboarding_argocd.md&#x26;title=\">Request support for deployment of your application</a>.</li>\n</ol>\n<p>In this way [ArgoCD][11] will be used to maintain your application always in sync with your current changes. Once you create a new release of your application (e.g. you changed your model, you added a new metric, you added a new feature) and a new image is available, you need to update the <a href=\"https://github.com/thoth-station/elyra-aidevsecops-tutorial/blob/bb6fad2441e8df8aa56c2c0e6b5ac45a2cda42eb/manifests/overlays/test/imagestreamtag.yaml#L10\">imagestreamtag</a> so that ArgoCD can deploy new version.</p>\n<p>Note: [AICoE Pipeline][8] can also update automatically the <a href=\"https://github.com/thoth-station/elyra-aidevsecops-tutorial/blob/bb6fad2441e8df8aa56c2c0e6b5ac45a2cda42eb/manifests/overlays/test/imagestreamtag.yaml#L10\">imagestreamtag</a> once a new release is created.</p>\n<p>Once everything is synced to the cluster, you can monitor your application from the <a href=\"https://argoproj.github.io/argo-cd/\">ArgoCD</a> using this <a href=\"https://argocd-server-argocd.apps.cnv.massopen.cloud/applications\">link</a> as shown in the image below:</p>\n<div style=\"text-align:center\">\n<img alt=\"Argo CD UI\" src=\"https://raw.githubusercontent.com/thoth-station/elyra-aidevsecops-tutorial/master/docs/images/ArgoCDUI.png\">\n</div>\n<h3 id=\"using-openshift-cli\" style=\"position:relative;\"><a href=\"#using-openshift-cli\" aria-label=\"using openshift cli permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using Openshift CLI</h3>\n<ol class=\"pf-c-list\">\n<li>Open a terminal in Jupyterlab</li>\n<li>Login from the terminal <code class=\"language-text\">oc login $CLUSTER_URL</code>.</li>\n<li>Insert your credentials <code class=\"language-text\">USERNAME</code> and <code class=\"language-text\">PASSWORD</code>.</li>\n<li>Make sure you are in <code class=\"language-text\">elyra-aidevsecops-tutorial</code> directory (you can run <code class=\"language-text\">pwd</code> command in the terminal to check your current path).</li>\n<li>Create Service using <code class=\"language-text\">oc apply -f ./manifests/base/service.yaml</code>.</li>\n<li>Create Route using <code class=\"language-text\">oc apply -f ./manifests/base/route.yaml</code>.</li>\n<li>Create DeploymentConfig using <code class=\"language-text\">oc apply -f ./manifests/deploymentconfig.yaml</code>.</li>\n</ol>\n<h2 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>References</h2>\n<ul class=\"pf-c-list\">\n<li><a href=\"https://www.operate-first.cloud/\">Operate First</a></li>\n<li><a href=\"https://argoproj.github.io/argo-cd/\">ArgoCD</a></li>\n</ul>","fields":{"srcLink":"https://github.com/thoth-station/elyra-aidevsecops-tutorial/blob/master/docs/source/deploy-model.md"},"frontmatter":{"title":"","description":null}}},"pageContext":{"id":"348f50c7-6be5-52dd-861d-7b2bb2de400b"}},"staticQueryHashes":["117426894","3000541721"]}