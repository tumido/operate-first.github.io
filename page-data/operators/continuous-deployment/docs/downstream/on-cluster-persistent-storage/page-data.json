{"componentChunkName":"component---src-templates-markdown-js","path":"/operators/continuous-deployment/docs/downstream/on-cluster-persistent-storage/","result":{"data":{"site":{"siteMetadata":{"title":"Operate First"}},"markdownRemark":{"id":"f5d9d989-87c7-5cce-94b7-27defd696c5e","html":"<h1 id=\"set-up-on-cluster-persistentvolumes-storage-using-nfs-on-local-node\" style=\"position:relative;\"><a href=\"#set-up-on-cluster-persistentvolumes-storage-using-nfs-on-local-node\" aria-label=\"set up on cluster persistentvolumes storage using nfs on local node permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set up on-cluster PersistentVolumes storage using NFS on local node</h1>\n<p>Bare Openshift cluster installations, like for example Quicklab’s Openshift 4 UPI clusters may lack persistent volume setup. This guide will help you set it up.</p>\n<p>Please verify that your cluster really lacks <code class=\"language-text\">pv</code>s:</p>\n<ol class=\"pf-c-list\">\n<li>Login as a cluster admin</li>\n<li>\n<p>Lookup available <code class=\"language-text\">PersistentVolume</code> resources:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ oc get <span class=\"token function\">pv</span>\nNo resources found</code></pre></div>\n</li>\n</ol>\n<p>If there are no <code class=\"language-text\">PersistentVolume</code>s available please continue and follow this guide. We’re gonna set up NFS server on the cluster node and show Openshift how to connect to it.</p>\n<p>Note: This guide will lead you through the process of setting up PVs, which use the deprecated <code class=\"language-text\">Recycle</code> reclaim policy. This makes the <code class=\"language-text\">PersistentVolume</code> available again as soon as the <code class=\"language-text\">PersistentVolumeClaim</code> resource is terminated and removed. However the data are left on the NFS share untouched. While this is suitable for development purposes, be advised that old data (from previous mounts) will be still available on the volume. Please consult <a href=\"https://kubernetes.io/docs/concepts/storage/persistent-volumes/#reclaiming\">Kubernetes docs</a> for other options.</p>\n<h2 id=\"manual-steps\" style=\"position:relative;\"><a href=\"#manual-steps\" aria-label=\"manual steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Manual steps</h2>\n<p>See automated Ansible playbook bellow for easier-to-use provisioning</p>\n<h3 id=\"prepare-remote-host\" style=\"position:relative;\"><a href=\"#prepare-remote-host\" aria-label=\"prepare remote host permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prepare remote host</h3>\n<ol class=\"pf-c-list\">\n<li>\n<p>SSH to the Quicklab node, and become superuser:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">curl https://gitlab.cee.redhat.com/cee_ops/quicklab/raw/master/docs/quicklab.key --output ~/.ssh/quicklab.key\nchmod 600 ~/.ssh/quicklab.key\nssh -i ~/.ssh/quicklab.key -o &quot;UserKnownHostsFile /dev/null&quot; -o &quot;StrictHostKeyChecking no&quot; quicklab@HOST\n\n# On HOST\nsudo su -</code></pre></div>\n</li>\n<li>\n<p>Install <code class=\"language-text\">nfs-utils</code> package</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">yum install nfs-utils</code></pre></div>\n</li>\n<li>\n<p>Create exported directories (for example in <code class=\"language-text\">/mnt/nfs</code>) and set ownership and permissions</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">mkdir -p /mnt/nfs/A ...\nchown nfsnobody:nfsnobody /mnt/nfs/A\nchmod 0777 /mnt/nfs/A</code></pre></div>\n</li>\n<li>\n<p>Populate <code class=\"language-text\">/etc/exports</code> file referencing directories from previous step to be accessible from your nodes as read,write:</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">/mnt/nfs/A node1(rw) node2(rw) ...\n...</code></pre></div>\n</li>\n<li>\n<p>Allow NFS in firewall</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">firewall-cmd --permanent --add-service mountd\nfirewall-cmd --permanent --add-service rpc-bind\nfirewall-cmd --permanent --add-service nfs\nfirewall-cmd --reload</code></pre></div>\n</li>\n<li>\n<p>Start and enable NFS service</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">systemctl enable --now nfs-server</code></pre></div>\n</li>\n</ol>\n<h3 id=\"add-persistentvolumes-to-openshift-cluster\" style=\"position:relative;\"><a href=\"#add-persistentvolumes-to-openshift-cluster\" aria-label=\"add persistentvolumes to openshift cluster permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add PersistentVolumes to Openshift cluster</h3>\n<p>Login as a cluster admin and create a <code class=\"language-text\">PersistentVolume</code> resource for each network share using this manifest:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolume\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> NAME <span class=\"token comment\"># Unique name</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">capacity</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> CAPACITY <span class=\"token comment\"># Keep in mind the total max size, the Quicklab host has a disk size of 20Gi total (usually ~15Gi of available and usable space)</span>\n  <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ReadWriteOnce\n  <span class=\"token key atrule\">nfs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /mnt/nfs/A <span class=\"token comment\"># Path to the NFS share on the server</span>\n    <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span> HOST_IP <span class=\"token comment\"># Not a hostname</span>\n  <span class=\"token key atrule\">persistentVolumeReclaimPolicy</span><span class=\"token punctuation\">:</span> Recycle</code></pre></div>\n<h2 id=\"using-ansible\" style=\"position:relative;\"><a href=\"#using-ansible\" aria-label=\"using ansible permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using Ansible</h2>\n<p>To avoid all the hustle with manual setup, we can use an Ansible playbook <a href=\"playbook.yaml\"><code class=\"language-text\">playbook.yaml</code></a>.</p>\n<h3 id=\"setup\" style=\"position:relative;\"><a href=\"#setup\" aria-label=\"setup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup</h3>\n<p>Please install Ansible and some additional collections from Ansible Galaxy needed by this playbook: <a href=\"https://galaxy.ansible.com/ansible/posix\">ansible.posix</a> for <code class=\"language-text\">firewalld</code> module and <a href=\"https://galaxy.ansible.com/community/kubernetes\">community.kubernetes</a> for <code class=\"language-text\">k8s</code> module. Also install the underlying python dependency <code class=\"language-text\">openshift</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible-galaxy collection <span class=\"token function\">install</span> ansible.posix\nStarting galaxy collection <span class=\"token function\">install</span> process\nProcess <span class=\"token function\">install</span> dependency map\nStarting collection <span class=\"token function\">install</span> process\nInstalling <span class=\"token string\">'ansible.posix:1.1.1'</span> to <span class=\"token string\">'/home/tcoufal/.ansible/collections/ansible_collections/ansible/posix'</span>\nDownloading https://galaxy.ansible.com/download/ansible-posix-1.1.1.tar.gz to /home/tcoufal/.ansible/tmp/ansible-local-43567u9ge76rl/tmpyttcjmul\nansible.posix <span class=\"token punctuation\">(</span><span class=\"token number\">1.1</span>.1<span class=\"token punctuation\">)</span> was installed successfully\n\n$ ansible-galaxy collection <span class=\"token function\">install</span> community.kubernetes\nStarting galaxy collection <span class=\"token function\">install</span> process\nProcess <span class=\"token function\">install</span> dependency map\nStarting collection <span class=\"token function\">install</span> process\nInstalling <span class=\"token string\">'community.kubernetes:1.0.0'</span> to <span class=\"token string\">'/home/tcoufal/.ansible/collections/ansible_collections/community/kubernetes'</span>\nDownloading https://galaxy.ansible.com/download/community-kubernetes-1.0.0.tar.gz to /home/tcoufal/.ansible/tmp/ansible-local-29431yk2zoutk/tmpwgl4xsnb\ncommunity.kubernetes <span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span>.0<span class=\"token punctuation\">)</span> was installed successfully\n\n$ pip <span class=\"token function\">install</span> --user openshift\n<span class=\"token punctuation\">..</span>.\nInstalling collected packages: kubernetes, openshift\n    Running setup.py <span class=\"token function\">install</span> <span class=\"token keyword\">for</span> openshift <span class=\"token punctuation\">..</span>. <span class=\"token keyword\">done</span>\nSuccessfully installed kubernetes-11.0.0 openshift-0.11.2</code></pre></div>\n<p>Additionally please login to your Quicklab cluster via <code class=\"language-text\">oc login</code> as a cluster admin.</p>\n<h3 id=\"configuration\" style=\"position:relative;\"><a href=\"#configuration\" aria-label=\"configuration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuration</h3>\n<p>Please view and modify the <code class=\"language-text\">env.yaml</code> file (or create additional variable files, and select it before executing playbook via <code class=\"language-text\">vars_file</code> variable)</p>\n<p>Example environment file:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">quicklab_host</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"upi-0.tcoufaldev.lab.upshift.rdu2.redhat.com\"</span>\n\n<span class=\"token key atrule\">pv_count_per_size</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">1Gi</span><span class=\"token punctuation\">:</span> <span class=\"token number\">6</span>\n  <span class=\"token key atrule\">2Gi</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n  <span class=\"token key atrule\">5Gi</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></code></pre></div>\n<ul class=\"pf-c-list\">\n<li><code class=\"language-text\">quicklab_host</code> - Points to one of the “Hosts” from your Quicklab Cluster info tab</li>\n<li>\n<p><code class=\"language-text\">pv_count_per_size</code> - Defines PV counts in relation to maximal allocable sizes map:</p>\n<ul class=\"pf-c-list\">\n<li>Use the target PV size as a key (follow GO/Kubernetes notation)</li>\n<li>Use volume count for that key “size” as the value</li>\n<li>Keep in mind the total size sum(key*value for key,value in pv<em>count</em>per_size.items()) &#x3C; Disk size of the Quicklab instance (usually ~15Gi of available space)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"run-the-playbook\" style=\"position:relative;\"><a href=\"#run-the-playbook\" aria-label=\"run the playbook permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run the playbook</h3>\n<p>Run the <code class=\"language-text\">playbook.yaml</code> (if you created a new environment file and you’d like to use other than default <code class=\"language-text\">env.yaml</code>, please specify the file via <code class=\"language-text\">-e vars_file=any-filename.yaml</code>)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ansible-playbook playbook.yaml</code></pre></div>\n<details>\n<summary>Click to expand output</summary>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">PLAY <span class=\"token punctuation\">[</span>Dynamically create Quicklab <span class=\"token function\">host</span> <span class=\"token keyword\">in</span> Ansible<span class=\"token punctuation\">]</span> **********************************************************************\n\nTASK <span class=\"token punctuation\">[</span>Gathering Facts<span class=\"token punctuation\">]</span> **************************************************************************************************\nok: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Load variables file<span class=\"token punctuation\">]</span> **********************************************************************************************\nok: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Preprocess the PV count per size map to a flat list<span class=\"token punctuation\">]</span> **************************************************************\nok: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Fetch Quicklab certificate<span class=\"token punctuation\">]</span> ***************************************************************************************\nok: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Adding host<span class=\"token punctuation\">]</span> ******************************************************************************************************\nchanged: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Get available Openshift nodes<span class=\"token punctuation\">]</span> ************************************************************************************\nok: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Preprocess nodes k8s resource response to list of IPs<span class=\"token punctuation\">]</span> ************************************************************\nok: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span>\n\nPLAY <span class=\"token punctuation\">[</span>Setup NFS on Openshift host<span class=\"token punctuation\">]</span> **************************************************************************************\n\nTASK <span class=\"token punctuation\">[</span>Gathering Facts<span class=\"token punctuation\">]</span> **************************************************************************************************\nok: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Copy localhost variables <span class=\"token keyword\">for</span> easier access<span class=\"token punctuation\">]</span> ***********************************************************************\nok: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Install the NFS server<span class=\"token punctuation\">]</span> *******************************************************************************************\nok: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Create <span class=\"token builtin class-name\">export</span> dirs<span class=\"token punctuation\">]</span> ***********************************************************************************************\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'2Gi'</span>, <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'2Gi'</span>, <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'5Gi'</span>, <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\nTASK <span class=\"token punctuation\">[</span>Populate /etc/exports file<span class=\"token punctuation\">]</span> ***************************************************************************************\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Allow services <span class=\"token keyword\">in</span> firewall<span class=\"token punctuation\">]</span> ***************************************************************************************\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span>nfs<span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span>rpc-bind<span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span>mountd<span class=\"token punctuation\">)</span>\n\nTASK <span class=\"token punctuation\">[</span>Reload firewall<span class=\"token punctuation\">]</span> **************************************************************************************************\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Enable and start NFS server<span class=\"token punctuation\">]</span> **************************************************************************************\nchanged: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Reload exports when the server was already started<span class=\"token punctuation\">]</span> ***************************************************************\nskipping: <span class=\"token punctuation\">[</span>quicklab<span class=\"token punctuation\">]</span>\n\nPLAY <span class=\"token punctuation\">[</span>Create PersistentVolumes <span class=\"token keyword\">in</span> OpenShift<span class=\"token punctuation\">]</span> ****************************************************************************\n\nTASK <span class=\"token punctuation\">[</span>Gathering Facts<span class=\"token punctuation\">]</span> **************************************************************************************************\nok: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Find IPv4 of the host<span class=\"token punctuation\">]</span> ********************************************************************************************\nok: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span>\n\nTASK <span class=\"token punctuation\">[</span>Create PersistentVolume resource<span class=\"token punctuation\">]</span> *********************************************************************************\nchanged: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1Gi'</span>, <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'2Gi'</span>, <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'2Gi'</span>, <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nchanged: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>item<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'5Gi'</span>, <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\nPLAY RECAP **************************************************************************************************************\nlocalhost                  <span class=\"token builtin class-name\">:</span> <span class=\"token assign-left variable\">ok</span><span class=\"token operator\">=</span><span class=\"token number\">10</span>   <span class=\"token assign-left variable\">changed</span><span class=\"token operator\">=</span><span class=\"token number\">2</span>    <span class=\"token assign-left variable\">unreachable</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>    <span class=\"token assign-left variable\">failed</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>    <span class=\"token assign-left variable\">skipped</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>    <span class=\"token assign-left variable\">rescued</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>    <span class=\"token assign-left variable\">ignored</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>\nquicklab                   <span class=\"token builtin class-name\">:</span> <span class=\"token assign-left variable\">ok</span><span class=\"token operator\">=</span><span class=\"token number\">8</span>    <span class=\"token assign-left variable\">changed</span><span class=\"token operator\">=</span><span class=\"token number\">5</span>    <span class=\"token assign-left variable\">unreachable</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>    <span class=\"token assign-left variable\">failed</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>    <span class=\"token assign-left variable\">skipped</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>    <span class=\"token assign-left variable\">rescued</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>    <span class=\"token assign-left variable\">ignored</span><span class=\"token operator\">=</span><span class=\"token number\">0</span></code></pre></div>\n</details>","fields":{"srcLink":"https://github.com/operate-first/continuous-deployment/blob/master/docs/downstream/on-cluster-persistent-storage/README.md"},"frontmatter":{"title":"","description":null}}},"pageContext":{"id":"f5d9d989-87c7-5cce-94b7-27defd696c5e"}},"staticQueryHashes":["117426894","3000541721"]}